<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="view.TelaParticipantesEventoController"
            prefWidth="650" prefHeight="480">

    <children>
        <Label text="Participantes do Evento" layoutX="20" layoutY="15" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

        <!-- Campo de filtro -->
        <TextField fx:id="txtFiltro" promptText="Filtrar por nome ou e-mail"
                   layoutX="20" layoutY="45" prefWidth="400"
                   onKeyReleased="#filtrarParticipantes"/>

        <!-- Botão de exportar para CSV -->
        <Button text="Exportar CSV" layoutX="430" layoutY="45" onAction="#exportarCSV"/>

        <!-- Tabela de participantes -->
        <TableView fx:id="tabelaParticipantes" layoutX="20" layoutY="90" prefWidth="610" prefHeight="300">
            <columns>
                <TableColumn fx:id="colNome" text="Nome" prefWidth="180"/>
                <TableColumn fx:id="colEmail" text="E-mail" prefWidth="220"/>
                <TableColumn fx:id="colPresente" text="Presente?" prefWidth="160"/>
                <TableColumn fx:id="colPermissao" text="Permissão" prefWidth="130"/>
            </columns>
        </TableView>

        <!-- Contador de presentes -->
        <Label fx:id="lblContadorPresentes" layoutX="20" layoutY="400"
               text="Presentes: 0" style="-fx-font-size: 14px;" />

        <!-- Botão de marcar/desmarcar todos -->
        <Button text="Marcar/Desmarcar Todos" layoutX="150" layoutY="430"
                onAction="#alternarTodosCheckBoxes"/>

        <!-- Botão de salvar -->
        <Button text="Salvar Presenças" layoutX="460" layoutY="430" onAction="#salvarPresencas"/>
    </children>
    <!-- Ranking de Participação -->
      <VBox layoutX="680" layoutY="55" prefWidth="200" prefHeight="400"
        spacing="8" style="-fx-background-color: #ecf0f1; -fx-padding: 10;">
      <Label text="🏆 Ranking de Participação"
           style="-fx-font-weight: bold; -fx-font-size: 14px;" />
      <ListView fx:id="rankingListView" prefHeight="360"/>
      </VBox>

</AnchorPane>
